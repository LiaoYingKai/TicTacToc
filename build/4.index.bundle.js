(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[4],{

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/Pages/tic-tac-toc/style.scss":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/Pages/tic-tac-toc/style.scss ***!
  \***********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.i, \".tic-tac-toc {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column; }\\n  .tic-tac-toc--o {\\n    color: blue; }\\n  .tic-tac-toc--x {\\n    color: red; }\\n  .tic-tac-toc button {\\n    margin-top: 20px; }\\n\", \"\"]);\n\n\n//# sourceURL=webpack:///./src/Pages/tic-tac-toc/style.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./src/Pages/tic-tac-toc/index.js":
/*!****************************************!*\
  !*** ./src/Pages/tic-tac-toc/index.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_checkerboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/checkerboard */ \"./src/components/checkerboard/index.js\");\n/* harmony import */ var _components_modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/modal */ \"./src/components/modal/index.js\");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums */ \"./src/enums/index.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! socket.io-client */ \"./node_modules/socket.io-client/lib/index.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(socket_io_client__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _components_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/button */ \"./src/components/button/index.js\");\n/* harmony import */ var _components_message__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/message */ \"./src/components/message/index.js\");\n/* harmony import */ var _components_play_title__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../components/play-title */ \"./src/components/play-title/index.js\");\n/* harmony import */ var _components_lattice__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../components/lattice */ \"./src/components/lattice/index.js\");\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./style.scss */ \"./src/Pages/tic-tac-toc/style.scss\");\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_9__);\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\n\n\n\n\nvar PLAY_1 = _enums__WEBPACK_IMPORTED_MODULE_3__[\"PlayEnums\"].PLAY_1,\n    PLAY_2 = _enums__WEBPACK_IMPORTED_MODULE_3__[\"PlayEnums\"].PLAY_2;\nvar LatticeStatusEnums = _components_lattice__WEBPACK_IMPORTED_MODULE_8__[\"default\"].TicTacToc.LatticeStatusEnums;\nvar CIRCLE = LatticeStatusEnums.CIRCLE,\n    FORK = LatticeStatusEnums.FORK;\nvar NONE = _enums__WEBPACK_IMPORTED_MODULE_3__[\"PlayStatus\"].NONE,\n    LOADING = _enums__WEBPACK_IMPORTED_MODULE_3__[\"PlayStatus\"].LOADING,\n    PLAYING = _enums__WEBPACK_IMPORTED_MODULE_3__[\"PlayStatus\"].PLAYING;\nvar initCheckerboard = [['', '', ''], ['', '', ''], ['', '', '']];\nvar socketUrl = 'https://kai-game-server.herokuapp.com/tic-tac-toc';\n\nfunction TicTacToc() {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(initCheckerboard),\n      _useState2 = _slicedToArray(_useState, 2),\n      checkerboard = _useState2[0],\n      setCheckerboard = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      play = _useState4[0],\n      setPlay = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nowPlay = _useState6[0],\n      setNowPlay = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      modalMessage = _useState8[0],\n      setModalMessage = _useState8[1];\n\n  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isModalVisible = _useState10[0],\n      setModalVisible = _useState10[1];\n\n  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      message = _useState12[0],\n      setMessage = _useState12[1];\n\n  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isMessageVisible = _useState14[0],\n      setMessageVisible = _useState14[1];\n\n  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(NONE),\n      _useState16 = _slicedToArray(_useState15, 2),\n      playStatus = _useState16[0],\n      setPlayStatus = _useState16[1];\n\n  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      ws = _useState18[0],\n      setWs = _useState18[1];\n\n  function _handleConnectWebSocket() {\n    setWs(socket_io_client__WEBPACK_IMPORTED_MODULE_4___default()(socketUrl));\n    setPlayStatus(LOADING);\n  }\n\n  function _handleDisconnectWebSocket() {\n    ws.close();\n    setPlayStatus(NONE);\n  }\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    if (ws) {\n      ws.on('startGame', function () {\n        setPlayStatus(PLAYING);\n      });\n      ws.on('PLAY_1', function () {\n        setPlay(PLAY_1);\n      });\n      ws.on('PLAY_2', function () {\n        setPlay(PLAY_2);\n      });\n      ws.on('nowPlay', function (nowPlay) {\n        setNowPlay(nowPlay);\n      });\n      ws.on('notNowPlay', function (message) {\n        _handleShowMessage(message);\n      });\n      ws.on('multipleAdd', function (message) {\n        _handleShowMessage(message);\n      });\n      ws.on('updateChess', function (checkerboard) {\n        setCheckerboard(checkerboard);\n      });\n      ws.on('gameResult', function (result) {\n        _handleShowModal(result);\n      });\n      ws.on('init', function (checkerboard) {\n        setCheckerboard(checkerboard);\n      });\n      ws.on('leaveGame', function () {\n        setModalVisible(true);\n        setModalMessage('對方已離開');\n        setPlayStatus(NONE);\n      });\n    }\n  }, [ws]);\n\n  function _handlePlayChess(rowIndex, columnIndex) {\n    if (!ws) return; // 下棋\n\n    ws.emit('addChess', {\n      play: play,\n      rowIndex: rowIndex,\n      columnIndex: columnIndex\n    });\n  }\n\n  function _handleClickBack() {\n    if (!ws) return;\n    ws.emit('init');\n    setPlayStatus(NONE);\n    setModalVisible(false);\n  }\n\n  function _handleShowModal(result) {\n    if (result === 'flat') {\n      setModalVisible(true);\n      setModalMessage('平手');\n    } else {\n      setModalVisible(true);\n      setModalMessage(\"\".concat(result, \" \\u7372\\u52DD\"));\n    }\n  }\n\n  function _handleShowMessage(message) {\n    setMessageVisible(true);\n    setMessage(message);\n    setTimeout(function () {\n      setMessageVisible(false);\n    }, 1000);\n  }\n\n  function _renderPlay() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n      className: \"tic-tac-toc--\".concat(play)\n    }, play, \" \");\n  }\n\n  function _renderNowPlay() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n      className: \"tic-tac-toc--\".concat(nowPlay)\n    }, nowPlay);\n  }\n\n  function _renderButton() {\n    if (playStatus === NONE) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        onClick: _handleConnectWebSocket\n      }, \" \\u958B\\u59CB\\u904A\\u6232 \");\n    }\n\n    if (playStatus === LOADING) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        onClick: _handleDisconnectWebSocket\n      }, \" \\u53D6\\u6D88\\u904A\\u6232 \");\n    }\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: \"tic-tac-toc\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_play_title__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n    status: playStatus,\n    play: _renderPlay(),\n    nowPlay: _renderNowPlay()\n  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_checkerboard__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n    checkerboard: checkerboard,\n    onClick: _handlePlayChess,\n    Lattice: _components_lattice__WEBPACK_IMPORTED_MODULE_8__[\"default\"].TicTacToc,\n    play1: CIRCLE,\n    play2: FORK,\n    type: _components_checkerboard__WEBPACK_IMPORTED_MODULE_1__[\"default\"].TypeEnums.TIC_TAC_TOC\n  }), _renderButton(), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_modal__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n    onClick: _handleClickBack,\n    isVisible: isModalVisible,\n    message: modalMessage\n  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_message__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    isVisible: isMessageVisible,\n    message: message\n  }));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TicTacToc);\n\n//# sourceURL=webpack:///./src/Pages/tic-tac-toc/index.js?");

/***/ }),

/***/ "./src/Pages/tic-tac-toc/style.scss":
/*!******************************************!*\
  !*** ./src/Pages/tic-tac-toc/style.scss ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./style.scss */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/Pages/tic-tac-toc/style.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.i, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n\n\n//# sourceURL=webpack:///./src/Pages/tic-tac-toc/style.scss?");

/***/ })

}]);